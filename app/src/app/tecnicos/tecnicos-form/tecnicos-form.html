<form [formGroup]="tecnicoForm" (ngSubmit)="submitTecnico()" novalidate>

    <div class="detail-container">
        <mat-card class="detail-card">

            <input type="hidden" formControlName="id" />

            <mat-card class="form-card">

                <!-- tÃ­tulo del formulario -->
                <mat-card-header class="primary-title title">
                    <mat-card-title>
                        {{ titleForm | translate }}
                    </mat-card-title>

                </mat-card-header>

                <mat-card-content>

                    <!-- nombre -->
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width" floatLabel="auto">
                                <mat-label>{{ 'TECNICOS.FORM.NOMBRE' | translate }}</mat-label>

                                <input matInput formControlName="nombre"
                                    [placeholder]="'TECNICOS.FORM.NOMBRE_PLACEHOLDER' | translate" />

                                @if (tecnicoForm.controls['nombre'].invalid && tecnicoForm.controls['nombre'].touched) {
                                <mat-error>
                                    @if (tecnicoForm.controls['nombre'].errors?.['required']) {
                                    {{ 'TECNICOS.FORM.NOMBRE_REQUIRED' | translate }}
                                    }
                                    @if (tecnicoForm.controls['nombre'].errors?.['minlength']) {
                                    {{ 'TECNICOS.FORM.NOMBRE_MIN' | translate }}
                                    }
                                </mat-error>
                                }
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- email -->
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width" floatLabel="auto">
                                <mat-label>{{ 'TECNICOS.FORM.EMAIL' | translate }}</mat-label>

                                <input matInput formControlName="email"
                                    [placeholder]="'TECNICOS.FORM.EMAIL_PLACEHOLDER' | translate" />

                                @if (tecnicoForm.controls['email'].invalid && tecnicoForm.controls['email'].touched) {
                                <mat-error>
                                    @if (tecnicoForm.controls['email'].errors?.['required']) {
                                    {{ 'TECNICOS.FORM.EMAIL_REQUIRED' | translate }}
                                    }
                                    @if (tecnicoForm.controls['email'].errors?.['email']) {
                                    {{ 'TECNICOS.FORM.EMAIL_INVALID' | translate }}
                                    }
                                </mat-error>
                                }
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- especialidades -->
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width" floatLabel="auto">
                                <mat-label>{{ 'TECNICOS.FORM.ESPECIALIDADES' | translate }}</mat-label>

                                <mat-select [placeholder]="'TECNICOS.FORM.ESPECIALIDADES_PLACEHOLDER' | translate"
                                    formControlName="especialidades" multiple>
                                    @for (item of espList(); track item.id) {
                                    <mat-option [value]="item.id">{{ item.nombre }}</mat-option>
                                    }
                                </mat-select>

                                @if (tecnicoForm.controls['especialidades'].invalid &&
                                tecnicoForm.controls['especialidades'].touched) {
                                <mat-error>{{ 'TECNICOS.FORM.ESPECIALIDADES_REQUIRED' | translate }}</mat-error>
                                }
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- disponibilidad -->
                    <div class="row align-center">
                        <mat-slide-toggle color="primary" formControlName="disponibilidad">
                            {{ 'TECNICOS.FORM.DISPONIBLE' | translate }}
                        </mat-slide-toggle>
                    </div>

                    <!-- carga actual -->
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width" floatLabel="auto">
                                <mat-label>{{ 'TECNICOS.FORM.CARGA_ACTUAL' | translate }}</mat-label>

                                <input matInput formControlName="cargaActual" readonly />

                                <mat-hint>{{ 'TECNICOS.FORM.CARGA_HINT' | translate }}</mat-hint>
                            </mat-form-field>
                        </div>
                    </div>

                </mat-card-content>

                <!-- acciones -->
                <mat-card-actions class="button-row">

                    <button matButton class="btn-tertiary" type="button" (click)="onReset()">
                        {{ 'TECNICOS.FORM.BORRAR' | translate }}
                    </button>

                    <button matButton class="btn-secondary" type="button" (click)="onBack()">
                        {{ 'TECNICOS.FORM.REGRESAR' | translate }}
                    </button>

                    <button matButton class="btn-primary" type="submit" [disabled]="loading()">
                        {{ 'TECNICOS.FORM.GUARDAR' | translate }}
                    </button>

                </mat-card-actions>

            </mat-card>

        </mat-card>
    </div>

</form>